Gdk-3.0/Gtk-3.0 supports multiple targets now, and the "target" variable 
no longer works. So, sort of hack around it for now?

---
--- configure.ac
+++ configure.ac
@@ -53,25 +53,28 @@
   [with_gtk=2.0])
 AC_MSG_RESULT([$with_gtk])
 
+GDK_TARGETS=
 case "$with_gtk" in
   2.0) GTK_API_VERSION=2.0
        GTK_REQUIRED=2.18.0
        VTE_PC_VERSION=
        VTE_REQUIRED=0.26.0
+       GDK_TARGETS=$($PKG_CONFIG --variable target gdk-$GTK_API_VERSION)
        ;;
   3.0) GTK_API_VERSION=3.0
        GTK_REQUIRED=2.91.6
        VTE_PC_VERSION=-2.90
        VTE_REQUIRED=0.27.3
+       GDK_TARGETS=$($PKG_CONFIG --variable targets gdk-$GTK_API_VERSION)
        ;;
 esac
 
-GDK_TARGET="$($PKG_CONFIG --variable target gdk-$GTK_API_VERSION)"
-
-case "$GDK_TARGET" in
-  x11) PLATFORM_DEPS="x11" ;;
-  *) PLATFORM_DEPS="" ;;
-esac
+PLATFORM_DEPS=
+for i in $GDK_TARGETS; do
+  if test "$i" = "x11"; then
+    PLATFORM_DEPS="x11"
+  fi
+done
 
 PKG_CHECK_MODULES([TERM],
   [vte$VTE_PC_VERSION >= $VTE_REQUIRED
@@ -92,11 +95,15 @@
 AC_ARG_WITH([smclient],
   [AS_HELP_STRING([--with-smclient-backend],[which smclient backend to use (xsmp/win32/quartz)])],
   [],
-  [case "$GDK_TARGET" in
-    x11) with_smclient=xsmp SMCLIENT_PKGS="sm" ;;
-    win32|quartz) with_smclient=$GDK_TARGET ;;
-    *) with_smclient=no ;;
-   esac])
+  [for i in $GDK_TARGETS; do
+    if test "$i" = "x11"; then
+      with_smclient=xsmp SMCLIENT_PKGS="sm"
+    elif test "$i" = "win32" -o "$i" = "quartz"; then
+      with_smclient=$i
+    else
+      with_smclient=no
+    fi
+  done])
 AC_MSG_RESULT([$with_smclient])
 
 if test "$with_smclient" != "no"; then
