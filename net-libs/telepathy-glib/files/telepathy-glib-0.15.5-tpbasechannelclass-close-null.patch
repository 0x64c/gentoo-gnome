From 0b7e9eab27502bbafc3f097c5c4496de9a24c3ca Mon Sep 17 00:00:00 2001
From: Will Thompson <will.thompson@collabora.co.uk>
Date: Wed, 17 Aug 2011 10:33:33 +0000
Subject: tp_base_channel_close: check vfunc is not NULL

Reviewed-by: Jonny Lamb <jonny.lamb@collabora.co.uk>
---
diff --git a/telepathy-glib/base-channel.c b/telepathy-glib/base-channel.c
index b6ce453..43c1734 100644
--- a/telepathy-glib/base-channel.c
+++ b/telepathy-glib/base-channel.c
@@ -378,6 +378,8 @@ tp_base_channel_close (TpBaseChannel *chan)
 {
   TpBaseChannelClass *klass = TP_BASE_CHANNEL_GET_CLASS (chan);
 
+  g_return_if_fail (klass->close != NULL);
+
   if (!tp_base_channel_is_destroyed (chan))
     klass->close (chan);
 }
--
cgit v0.9.0.2-2-gbebe
