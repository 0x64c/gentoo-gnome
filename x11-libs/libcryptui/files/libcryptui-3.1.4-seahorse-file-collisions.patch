From af96725589fabe41b348c6f5473122b7b0771184 Mon Sep 17 00:00:00 2001
From: Alexandre Rostovtsev <tetromino@gmail.com>
Date: Tue, 26 Jul 2011 02:42:22 +0000
Subject: Prevent file collisions between libcryptui and seahorse (#655291)

To prevent file collisions between seahorse and libcryptui:
* install pixmaps in /usr/share/pixmaps/cryptui (and set pixmapsdir
  to the correct value, so daemon/seahorse-gtkstock.c can actually
  load them);
* install ui files in /usr/share/cryptui/ui;
* rename seahorse.schemas to cryptui.schemas;
* use "cryptui" as the gettext translation domain.

Addresses Gnome bug #655291.
---
diff --git a/configure.ac b/configure.ac
index 200be7f..2c0e121 100644
--- a/configure.ac
+++ b/configure.ac
@@ -325,7 +325,7 @@ dnl *******************
 dnl ***** gettext *****
 dnl *******************
 
-GETTEXT_PACKAGE=seahorse
+GETTEXT_PACKAGE=cryptui
 AC_SUBST(GETTEXT_PACKAGE)
 AC_DEFINE_UNQUOTED(GETTEXT_PACKAGE, "$GETTEXT_PACKAGE", [Name of the gettext domain.])
 
diff --git a/daemon/Makefile.am b/daemon/Makefile.am
index 08ff418..d214559 100644
--- a/daemon/Makefile.am
+++ b/daemon/Makefile.am
@@ -1,7 +1,7 @@
 
 localedir = $(datadir)/locale
-pixmapsdir = $(datadir)/pixmaps/
-uidir = $(datadir)/seahorse/ui/
+pixmapsdir = $(datadir)/pixmaps/cryptui/
+uidir = $(datadir)/cryptui/ui/
 
 INCLUDES = -I$(top_builddir) \
 	-I$(top_srcdir) \
diff --git a/data/Makefile.am b/data/Makefile.am
index d343d5f..d6e2d44 100644
--- a/data/Makefile.am
+++ b/data/Makefile.am
@@ -1,7 +1,7 @@
 @INTLTOOL_SCHEMAS_RULE@
 
 schemasdir = $(GCONF_SCHEMA_FILE_DIR)
-schemas_in_files = seahorse.schemas.in
+schemas_in_files = cryptui.schemas.in
 schemas_DATA = $(schemas_in_files:.schemas.in=.schemas)
 
 if GCONF_SCHEMAS_INSTALL
diff --git a/data/seahorse.schemas.in b/data/cryptui.schemas.in
index 95ca661..d90cbd1 100644
--- a/data/seahorse.schemas.in
+++ b/data/cryptui.schemas.in
@@ -8,7 +8,7 @@
 			<default>FALSE</default>
 			<locale name="C">
 				<short>Enable DNS-SD sharing</short>
-                <long>Enables DNS-SD (Apple Bonjour) sharing of keys. seahorse-daemon 
+                <long>Enables DNS-SD (Apple Bonjour) sharing of keys. seahorse-daemon
                 must be running and must be built with HKP and DNS-SD support.</long>
 			</locale>
 		</schema>
@@ -115,8 +115,8 @@
 			<locale name="C">
 				<short>The column to sort the seahorse keys by</short>
 				<long>Specify the column to sort the seahorse key manager main
-				window by. Columns are: 'name', 'id', 'validity', 'expires', 
-				'trust', and 'type'. Put a '-' in front of the column name to 
+				window by. Columns are: 'name', 'id', 'validity', 'expires',
+				'trust', and 'type'. Put a '-' in front of the column name to
                 sort in descending order.</long>
 			</locale>
 		</schema>
@@ -128,8 +128,8 @@
             <default>name</default>
             <locale name="C">
                 <short>The column to sort the recipients by</short>
-                <long>Specify the column to sort the recipients window by. 
-                Columns are: 'name' and 'id'. Put a '-' in front of the 
+                <long>Specify the column to sort the recipients window by.
+                Columns are: 'name' and 'id'. Put a '-' in front of the
                 column name to sort in descending order.</long>
             </locale>
         </schema>
@@ -143,7 +143,7 @@
 			<locale name="C">
 				<short>PGP Key servers</short>
 				<long>A list of key server URIs to search for remote PGP keys.
-				In later versions a display name can be included, by appending a 
+				In later versions a display name can be included, by appending a
 				space and then the name.</long>
 			</locale>
 		</schema>
@@ -155,7 +155,7 @@
             <default>false</default>
             <locale name="C">
                 <short>Auto Retrieve Keys</short>
-                <long>Whether or not keys should be automatically retrieved from key 
+                <long>Whether or not keys should be automatically retrieved from key
                 servers.</long>
             </locale>
         </schema>
@@ -193,19 +193,19 @@
 				<short>Last key server search pattern</short>
 				<long>The last search pattern searched for against a key server.</long>
 			</locale>
-		</schema>	
+		</schema>
         <schema>
 			<key>/schemas/desktop/pgp/keyservers/search_keyservers</key>
 			<applyto>/desktop/pgp/keyservers/search_keyservers</applyto>
- 			<owner>seahorse</owner>
+			<owner>seahorse</owner>
 			<type>list</type>
             <list_type>string</list_type>
- 			<default>[]</default>
- 			<locale name="C">
+			<default>[]</default>
+			<locale name="C">
 				<short>Last key servers used</short>
- 				<long>The last key server a search was performed against 
- 				or empty for all key servers.</long>
- 			</locale>
+				<long>The last key server a search was performed against
+				or empty for all key servers.</long>
+			</locale>
         </schema>
 	</schemalist>
 </gconfschemafile>
diff --git a/pixmaps/22x22/Makefile.am b/pixmaps/22x22/Makefile.am
index 60922ce..7fda357 100644
--- a/pixmaps/22x22/Makefile.am
+++ b/pixmaps/22x22/Makefile.am
@@ -1,5 +1,5 @@
 
-icon22dir = $(datadir)/pixmaps/seahorse/22x22/
+icon22dir = $(datadir)/pixmaps/cryptui/22x22/
 icon22_DATA =   seahorse-key.png \
                 seahorse-key-personal.png \
                 seahorse-key-ssh.png \
diff --git a/pixmaps/48x48/Makefile.am b/pixmaps/48x48/Makefile.am
index a91f86f..c908b1e 100644
--- a/pixmaps/48x48/Makefile.am
+++ b/pixmaps/48x48/Makefile.am
@@ -1,5 +1,5 @@
 
-icon48dir = $(datadir)/pixmaps/seahorse/48x48/
+icon48dir = $(datadir)/pixmaps/cryptui/48x48/
 icon48_DATA =   seahorse-key.png \
                 seahorse-key-personal.png \
                 seahorse-key-ssh.png \
diff --git a/pixmaps/scalable/Makefile.am b/pixmaps/scalable/Makefile.am
index e43463b..27c0d44 100644
--- a/pixmaps/scalable/Makefile.am
+++ b/pixmaps/scalable/Makefile.am
@@ -1,4 +1,4 @@
-iconsvgdir = $(datadir)/pixmaps/seahorse/scalable/
+iconsvgdir = $(datadir)/pixmaps/cryptui/scalable/
 iconsvg_DATA =  seahorse-key.svg \
                 seahorse-key-personal.svg \
                 seahorse-key-ssh.svg \
diff --git a/po/POTFILES.in b/po/POTFILES.in
index 95c1137..7e2db04 100644
--- a/po/POTFILES.in
+++ b/po/POTFILES.in
@@ -25,7 +25,7 @@ daemon/seahorse-unknown-source.c
 daemon/seahorse-util.c
 daemon/seahorse-validity.c
 daemon/seahorse-widget.c
-data/seahorse.schemas.in
+data/cryptui.schemas.in
 libcryptui/cryptui.c
 libcryptui/cryptui-key-chooser.c
 libcryptui/cryptui-key-list.c
--
cgit v0.9
